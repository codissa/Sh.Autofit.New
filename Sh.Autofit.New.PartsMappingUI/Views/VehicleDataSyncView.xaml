<UserControl x:Class="Sh.Autofit.New.PartsMappingUI.Views.VehicleDataSyncView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             d:DesignHeight="700" d:DesignWidth="1200"
             FlowDirection="RightToLeft">
    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
    </UserControl.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Loading Overlay -->
        <Border Grid.Row="0" Grid.RowSpan="4"
               Background="#80000000"
               Visibility="{Binding IsLoading, Converter={StaticResource BoolToVisibilityConverter}}"
               Panel.ZIndex="1000">
            <Border Background="White"
                   CornerRadius="8"
                   Padding="30"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Center"
                   MinWidth="300">
                <StackPanel>
                    <TextBlock Text="â³" FontSize="48" HorizontalAlignment="Center" Margin="0,0,0,10"/>
                    <TextBlock Text="{Binding StatusMessage}"
                              FontSize="14"
                              FontWeight="SemiBold"
                              HorizontalAlignment="Center"
                              TextWrapping="Wrap"
                              TextAlignment="Center"/>

                    <!-- Progress Bar -->
                    <ProgressBar Height="20"
                                Margin="0,15,0,10"
                                Minimum="0"
                                Maximum="{Binding TotalRecords}"
                                Value="{Binding Progress}"
                                Visibility="{Binding IsLoading, Converter={StaticResource BoolToVisibilityConverter}}"/>

                    <TextBlock HorizontalAlignment="Center"
                              FontSize="12"
                              Foreground="Gray"
                              Visibility="{Binding IsLoading, Converter={StaticResource BoolToVisibilityConverter}}">
                        <Run Text="{Binding Progress, Mode=OneWay}"/>
                        <Run Text="/"/>
                        <Run Text="{Binding TotalRecords, Mode=OneWay}"/>
                    </TextBlock>

                    <Button Content="×‘×™×˜×•×œ"
                           Command="{Binding CancelSyncCommand}"
                           Margin="0,15,0,0"
                           Padding="20,8"
                           Background="#F44336"
                           Foreground="White"
                           BorderThickness="0"
                           Cursor="Hand"
                           Visibility="{Binding CanCancel, Converter={StaticResource BoolToVisibilityConverter}}"/>
                </StackPanel>
            </Border>
        </Border>

        <!-- Title Section -->
        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="×¡× ×›×¨×•×Ÿ × ×ª×•× ×™ ×¨×›×‘×™×"
                      FontSize="28"
                      FontWeight="Bold"/>
            <TextBlock Text="×¡× ×›×¨×•×Ÿ × ×ª×•× ×™ ×¨×›×‘×™× ×ž×ž××’×¨ ×”×ž×ž×©×œ×” (×”×¡×¤×§ ×›×•×—, ×”× ×¢×”, ×•×¢×•×“)"
                      FontSize="14"
                      Foreground="Gray"
                      Margin="0,5,0,0"/>
        </StackPanel>

        <!-- Action Buttons -->
        <Border Grid.Row="1"
               Background="#F5F5F5"
               CornerRadius="8"
               Padding="20"
               Margin="0,0,0,20">
            <StackPanel>
                <TextBlock Text="×¤×¢×•×œ×•×ª"
                          FontSize="16"
                          FontWeight="SemiBold"
                          Margin="0,0,0,15"/>

                <Button Content="ðŸ”„ ×¡× ×›×¨×Ÿ ××ª ×›×œ ×”×¨×›×‘×™×"
                       Command="{Binding SyncAllVehiclesCommand}"
                       Padding="15,10"
                       FontSize="16"
                       FontWeight="SemiBold"
                       Background="#4CAF50"
                       Foreground="White"
                       BorderThickness="0"
                       Cursor="Hand"
                       HorizontalAlignment="Right"
                       Margin="0,0,0,10">
                    <Button.ToolTip>
                        <TextBlock Text="×ž×¡× ×›×¨×Ÿ ××ª ×›×œ ×”×¨×›×‘×™× ×‘×ž×¢×¨×›×ª ×¢× × ×ª×•× ×™ ×”×ž×ž×©×œ×”&#x0a;(×›-93,000 ×¨×©×•×ž×•×ª, ×¢×©×•×™ ×œ×§×—×ª 5-10 ×“×§×•×ª)"
                                  TextWrapping="Wrap"
                                  MaxWidth="300"/>
                    </Button.ToolTip>
                </Button>

                <TextBlock Text="â„¹ï¸ ×”×¡× ×›×¨×•×Ÿ ×™×¢×“×›×Ÿ: ×”×¡×¤×§ ×›×•×—, ×¡×•×’ ×”× ×¢×” (2WD/4WD/AWD), ×“×œ×ª×•×ª, ×ž×•×©×‘×™×, ×ž×©×§×œ, ×“×™×¨×•×’ ×‘×˜×™×—×•×ª, ×“×™×¨×•×’ ×™×¨×•×§, ×¨×ž×ª ×’×™×ž×•×¨ ×•×¡×•×’ ×ž×¨×›×‘"
                          FontSize="12"
                          Foreground="Gray"
                          TextWrapping="Wrap"
                          Margin="0,0,0,15"/>

                <Border BorderBrush="#FFC107"
                       BorderThickness="2"
                       CornerRadius="4"
                       Padding="10"
                       Background="#FFF9C4">
                    <StackPanel>
                        <TextBlock FontWeight="SemiBold"
                                  Foreground="#F57C00"
                                  Margin="0,0,0,5">
                            <Run Text="âš ï¸"/>
                            <Run Text="×”×¢×¨×” ×—×©×•×‘×”"/>
                        </TextBlock>
                        <TextBlock Text="×œ×¤× ×™ ×”×¡× ×›×¨×•×Ÿ ×”×¨××©×•×Ÿ, ×•×•×“× ×©×§×•×“×™ ×”×™×¦×¨×Ÿ ×•×”×“×’× ×”×ž×ž×©×œ×ª×™×™× (GovernmentManufacturerCode, GovernmentModelCode) ×ž××•×›×œ×¡×™× ×‘×˜×‘×œ×ª VehicleTypes."
                                  TextWrapping="Wrap"
                                  Foreground="#555"/>
                    </StackPanel>
                </Border>
            </StackPanel>
        </Border>

        <!-- Status and Results -->
        <Grid Grid.Row="2" Margin="0,0,0,20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="10"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Current Status -->
            <Border Grid.Column="0"
                   Background="White"
                   BorderBrush="#E0E0E0"
                   BorderThickness="1"
                   CornerRadius="8"
                   Padding="15">
                <StackPanel>
                    <TextBlock Text="×¡×˜×˜×•×¡ × ×•×›×—×™"
                              FontSize="14"
                              FontWeight="SemiBold"
                              Margin="0,0,0,10"/>
                    <TextBlock Text="{Binding StatusMessage}"
                              FontSize="13"
                              TextWrapping="Wrap"
                              Foreground="#333"/>
                </StackPanel>
            </Border>

            <!-- Last Sync Summary -->
            <Border Grid.Column="2"
                   Background="White"
                   BorderBrush="#E0E0E0"
                   BorderThickness="1"
                   CornerRadius="8"
                   Padding="15">
                <StackPanel>
                    <TextBlock Text="×ª×•×¦××•×ª ×¡× ×›×¨×•×Ÿ ××—×¨×•×Ÿ"
                              FontSize="14"
                              FontWeight="SemiBold"
                              Margin="0,0,0,10"/>
                    <TextBlock Text="{Binding SyncResultSummary}"
                              FontSize="13"
                              TextWrapping="Wrap"
                              Foreground="#333"/>
                </StackPanel>
            </Border>
        </Grid>

        <!-- Detailed Results -->
        <Border Grid.Row="3"
               Background="White"
               BorderBrush="#E0E0E0"
               BorderThickness="1"
               CornerRadius="8"
               Padding="15">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel>
                    <TextBlock Text="×¤×¨×˜×™ ×¡× ×›×¨×•×Ÿ ×ž×œ××™×"
                              FontSize="14"
                              FontWeight="SemiBold"
                              Margin="0,0,0,10"/>
                    <TextBlock Text="{Binding SyncDetails}"
                              FontFamily="Consolas"
                              FontSize="12"
                              TextWrapping="Wrap"
                              Foreground="#333"/>
                </StackPanel>
            </ScrollViewer>
        </Border>
    </Grid>
</UserControl>
